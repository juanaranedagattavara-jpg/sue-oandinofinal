#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Verificar formato de commit message (Conventional Commits)
commit_regex='^(feat|fix|docs|style|refactor|test|chore)(\(.+\))?: .{1,50}'

if ! grep -qE "$commit_regex" "$1"; then
    echo "❌ Formato de commit inválido!"
    echo ""
    echo "Formato requerido: tipo(scope): descripción"
    echo ""
    echo "Tipos válidos:"
    echo "  feat:     nueva funcionalidad"
    echo "  fix:      corrección de bug"
    echo "  docs:     cambios en documentación"
    echo "  style:    cambios de formato/estilo"
    echo "  refactor: refactorización de código"
    echo "  test:     agregar o modificar tests"
    echo "  chore:    cambios en build/tools"
    echo ""
    echo "Ejemplos:"
    echo "  feat: add hero section layout"
    echo "  fix: form email validation"
    echo "  style: update tailwind tokens"
    echo "  docs: update README with new features"
    echo ""
    exit 1
fi

echo "✅ Formato de commit válido"
